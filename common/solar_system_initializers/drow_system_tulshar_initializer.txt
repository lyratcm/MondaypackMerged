drow_system_tulshar_initializer = {
	name = "Ilithor"
	class = "sc_drow_tulshar"
	usage = origin

	init_effect = {
		every_neighbor_system = {
			set_star_flag = empire_cluster
			every_neighbor_system = {
				set_star_flag = empire_cluster
			}
		}

		if = {
			limit = { NOT = { is_inside_nebula = yes } }
			create_drow_tulshar_nebula = yes

		}
	}

	flags = { empire_home_system custom_system }
		
	planet = {
		class = "pc_m_star"
		name = "Avariel"
		orbit_distance = 0
		orbit_angle = 0
		size = 30

		flags = { starting_mining_target }

		init_effect = {
			clear_deposits = yes
			add_deposit = d_energy_5

		}
	}
		
	planet = {
		name = "Chathusst'na"
		class = "pc_molten"
		size = 12
		orbit_distance = 40
		orbit_angle = random

		flags = { starting_mining_target }
	
		init_effect = {
			clear_deposits = yes
			add_deposit = d_minerals_5
		}
	}
	
	planet = {
		name = "Valshaquellar"
		class = pc_drow_valshaquellar_dead
		orbit_angle = 135
		orbit_distance = 20
		size = 15
		deposit_blockers = none

		flags = { megastructure habitat drow_valshaquellar_project }

		init_effect = {
			if = {
				limit = {
					NOT = { exists = event_target:drow_valshaquellar }
				}
				save_global_event_target_as = drow_valshaquellar
			}

			add_modifier = {
				modifier = drow_defunct_lifesupport
				days = -1
			}

			add_modifier = {
				modifier = drow_decimated_infrastructure
				days = -1
			}

			create_ambient_object = {
				type = "large_debris_object"
				entity_offset_height = -15
			}
			last_created_ambient_object = {
				set_ambient_object_flag = drow_valshaquellar_debris
				set_location = {
					target = event_target:drow_valshaquellar
					angle = 5
				}
			}
		}
	}
		
	planet = {
		name = "Delmask'ri"
		class = "pc_drow_speleoterrestrial"
		orbit_angle = 135
		orbit_distance = 20
		size = 17
		flags = { drow_valshaquellar_start tulshar_capital }
		starting_planet = yes	
		home_planet = yes
		has_ring = yes
		deposit_blockers = none
		modifiers = none
	}
	
	planet = {
		name = "Tuai'othe"
		class = "pc_toxic"
		size = 20
		orbit_distance = 20
		orbit_angle = { min = 45 max = 120 }

		flags = { ignore_startup_effect has_megastructure }

		init_effect = {
			clear_deposits = yes
			add_deposit = d_society_3
		}
	}

	asteroid_belt = {
		type = elven_crystal_asteroid_belt_red
		radius = 120
	}
	
	planet = {
		name = "qu'Madonest"
		class = "pc_rare_crystal_asteroid"
		entity = "elven_asteroid_crystal_red_large_01_entity"
		orbit_distance = 20
		orbit_angle = 90

		flags = { starting_mining_target }

		init_effect = {
			clear_deposits = yes
			add_deposit = d_minerals_5
		}
	}
	
	planet = {
		name = "Gol'ssinss"
		class = "pc_rare_crystal_asteroid"
		entity = "elven_asteroid_crystal_red_large_01_entity"
		orbit_distance = 0
		orbit_angle = { min = 90 max = 120 }

		init_effect = {
			clear_deposits = yes
			add_deposit = d_trade_value_1
		}
	}
	
	planet = {
		name = "Olagheut"
		class = "pc_rare_crystal_asteroid"
		entity = "elven_asteroid_crystal_red_large_01_entity"
		orbit_distance = 0
		orbit_angle = { min = 90 max = 120 }

		init_effect = {
			clear_deposits = yes
			add_deposit = d_minerals_3
		}
	}
	
	
	planet = {
		name = "Shadrok"
		class = "pc_barren"
		orbit_distance = 40
		orbit_angle = { min = 90 max = 270 }
		size = { min = 24 max = 35 }
		has_ring = yes

		init_effect = {
			clear_deposits = yes
			add_deposit = d_engineering_3
		}
	}
	
	planet = {
		name = "Yah de'Xus"
		class = "pc_gas_giant"
		entity = "drow_01_gas_giant_yahdexus"
		orbit_distance = 40
		orbit_angle = { min = 90 max = 270 }
		size = { min = 25 max = 35 }
		has_ring = yes

		flags = { starting_mining_target }
		
		init_effect = {
			prevent_anomaly = yes
			clear_deposits = yes 
			add_deposit = d_energy_5
		}
	}
	
	change_orbit = 35
	
	neighbor_system = {
		distance = { min = 1 max = 60 }	
		initializer = "drow_system_tulshar_neighbor1_initializer"
	}
	
	neighbor_system = {
		distance = { min = 1 max = 60 }	
		initializer = "drow_system_tulshar_neighbor2_initializer"
	}
	
	neighbor_system = {
		distance = { min = 1 max = 60 }	
		initializer = "drow_system_tulshar_neighbor3_initializer"
	}
}

