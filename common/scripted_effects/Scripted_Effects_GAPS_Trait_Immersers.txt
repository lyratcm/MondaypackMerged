
Scripted_Planet_Effect_GAPS_Count_Blockers = {
	set_variable = { which = "Planet_Variable_GAPS_Num_Blockers" value = 0 }
	every_deposit = {
		limit = { is_blocker = yes }
		planet = { change_variable = { which = "Planet_Variable_GAPS_Num_Blockers" value = 1 } }
	}
}
Scripted_Planet_Effect_GAPS_Apply_Immersers_Modifiers = {
	every_owned_pop = {
		limit = { has_trait = Trait_GAPS_Immersers has_modifier = Pop_Modifier_GAPS_Immersers_Boost }
		while = {
			limit = { has_modifier = Pop_Modifier_GAPS_Immersers_Boost }
			remove_modifier = Pop_Modifier_GAPS_Immersers_Boost
		}
	}
	if = { 
		limit = { check_variable = { which = "Planet_Variable_GAPS_Num_Blockers" value = 0 } }
		every_owned_pop = {
			limit = { pop_has_trait = Trait_GAPS_Immersers }
			add_modifier = { modifier = Pop_Modifier_GAPS_Immersers_Penalty days = -1 }
		}
	}
	else = { 
		while = {
			count = Planet_Variable_GAPS_Num_Blockers
			every_owned_pop = { limit = { pop_has_trait = Trait_GAPS_Immersers } add_modifier = { modifier = Pop_Modifier_GAPS_Immersers_Boost days = -1 } }
		}
	}
}